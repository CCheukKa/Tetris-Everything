const boardDefault = [
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
]
var board = new Board();
const minoName = [`X`, `Z`, `L`, `O`, `S`, `I`, `J`, `T`];
const spawn = new Coordinate(4, 1)

var activeMino = new ActiveMino(spawn.x, spawn.y, Math.ceil(Math.random() * 7));

window.addEventListener('dropMino', () => { dropMino(); });
window.addEventListener('generateNewMino', () => { generateNewMino() });



// Movement system
function rotate(direction) {
    if (!activeMino) { return false; }
    let srs = SRS(direction);
    if (srs) {
        delete activeMino;
        activeMino = srs
    }; //rotate successful

    //
    window.dispatchEvent(event_updateActiveMino);
    return true;
}

function move(direction) {
    if (!allowMove(direction)) { return false; }
    activeMino.centerX += direction;
    window.dispatchEvent(event_updateActiveMino);
    return true;
}

function hardDrop() {
    let result = true;
    while (result) {
        result = gravity();
    }
    return true;
}